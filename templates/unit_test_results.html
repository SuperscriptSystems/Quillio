{% extends "base.html" %}

{% block title %}{% if current_user.language == 'russian' %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞: {{ test_name }}{% else %}Test Results: {{ test_name }}{% endif %}{% endblock %}

{% block content %}
{% set lang = current_user.language %}
      <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='favicon.png') }}">
<style>
    .container {
        max-width: 700px;
        margin: auto;
        background: #344955;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    h1 {
        color: #F0F0F0;
        border-bottom: 2px solid #4a5e6a;
        padding-bottom: 10px;
    }
    .score {
        font-size: 28px;
        font-weight: bold;
        color: #5cb85c;
        margin-bottom: 20px;
        text-align: center;
    }
    .results-list p {
        margin: 25px 0;
        line-height: 1.7;
        color: #E0E0E0;
        padding-bottom: 20px;
        border-bottom: 1px solid #4a5e6a;
    }
    .results-list p:last-of-type {
        border-bottom: none;
    }
    strong {
        color: #F0F0F0;
    }
    .status-correct { color: #5cb85c; font-weight: 700; }
    .status-incorrect { color: #d9534f; font-weight: 700; }
    .actions {
        text-align: center;
        margin-top: 30px;
    }
    .actions a {
        text-decoration: none;
        background: #5cb85c;
        color: #fff;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: bold;
        transition: background-color 0.3s ease;
    }
    .actions a:hover {
        background: #4a9a4a;
    }
</style>
<div class="container">
    <h1>{% if lang == 'russian' %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è: {{ test_name }}{% else %}Results for: {{ test_name }}{% endif %}</h1>
    <div class="score">{% if lang == 'russian' %}–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–ª: {{ final_score }}{% else %}Final Score: {{ final_score }}{% endif %}%</div>
    <div class="results-list">
        {% for item in answers %}
            <p>
                <strong>{% if lang == 'russian' %}–í:{% else %}Q:{% endif %}</strong> {{ item.question }}<br>
                <strong>{% if lang == 'russian' %}üìù –í–∞—à –æ—Ç–≤–µ—Ç:{% else %}üìù Your Answer:{% endif %}</strong> {{ item.answer }}<br>
                <strong>{% if lang == 'russian' %}‚úÖ –û—Ü–µ–Ω–∫–∞:{% else %}‚úÖ Assessment:{% endif %}</strong>
                {% set assess = item.assessment or '' %}
                {% set lower = assess|lower %}
                {% if lower[:7] == 'correct' %}
                    <span class="status-correct">{{ assess[:7] }}</span>{{ assess[7:] }}
                {% elif lower[:9] == 'incorrect' %}
                    <span class="status-incorrect">{{ assess[:9] }}</span>{{ assess[9:] }}
                {% elif lower[:9] == '–ø—Ä–∞–≤–∏–ª—å–Ω–æ' %}
                    <span class="status-correct">{{ assess[:9] }}</span>{{ assess[9:] }}
                {% elif lower[:12] == '–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ' %}
                    <span class="status-incorrect">{{ assess[:12] }}</span>{{ assess[12:] }}
                {% else %}
                    {{ assess }}
                {% endif %}
            </p>
        {% endfor %}
    </div>
    <div class="actions">
        <a href="{{ url_for('show_course', course_id=course_id) }}">{% if lang == 'russian' %}–ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å—É{% else %}Back to Course{% endif %}</a>
    </div>
</div>
{% endblock %}